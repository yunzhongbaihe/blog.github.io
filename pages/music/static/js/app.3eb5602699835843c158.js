webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-nav"},[s("router-link",{staticClass:"home",class:{active:"/main/home"===this.$route.path},attrs:{to:"/main/home"}},[s("span",{staticClass:"icon icon-home"}),t._v(" "),s("span",{staticClass:"label"},[t._v("首页")])]),t._v(" "),s("router-link",{staticClass:"search",class:{active:"/main/search"===this.$route.path},attrs:{to:"/main/search"}},[s("span",{staticClass:"icon icon-search"}),t._v(" "),s("span",{staticClass:"label"},[t._v("搜索")])]),t._v(" "),s("router-link",{staticClass:"search",class:{active:"/main/play"===this.$route.path},attrs:{to:"/main/play"}},[s("span",{staticClass:"icon icon-play"}),t._v(" "),s("span",{staticClass:"label"},[t._v("播放")])])],1)},staticRenderFns:[]},i={name:"App",components:{BottomNav:s("VU/8")({name:"BottomNav"},a,!1,null,null,null).exports}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view"),this._v(" "),e("BottomNav"),this._v(" "),e("audio",{attrs:{id:"audioBox",preload:"auto"}},[this._v("您的浏览器不支持Audio标签")])],1)},staticRenderFns:[]},l=s("VU/8")(i,r,!1,null,null,null).exports,o=s("/ocq"),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-page mui-content",attrs:{id:"mainPage"}},[e("router-view")],1)},staticRenderFns:[]},u=s("VU/8")({name:"Main"},c,!1,null,null,null).exports,m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-classify"},[s("ul",{staticClass:"mui-table-view mui-grid-view mui-grid-9"},t._l(t.list,function(e){return s("li",{key:e.type,staticClass:"mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-3",class:{"mui-active":Number(t.songType===e.type)},on:{click:function(s){t.sendTypeToHome(e.type)}}},[s("a",{attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"mui-media-body"},[t._v(t._s(e.text))])])])}))])},staticRenderFns:[]},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-list"},t._l(t.songList,function(e){return s("ul",{key:e.song_id,staticClass:"mui-table-view"},[s("li",{staticClass:"mui-table-view-cell"},[s("router-link",{attrs:{to:{path:"/main/play",query:{songId:e.song_id}}}},[s("span",[t._v(t._s(e.title.replace(/[（）《》]/gi,""))+" ---- "+t._s(e.author))])])],1)])}))},staticRenderFns:[]},d={name:"Home",data:function(){return{songType:1,songId:"",songTingId:"",songList:[]}},mounted:function(){this.getSongList()},methods:{Server:function(t,e,s){var n=this;$.ajax({url:this.HOME,type:"get",data:t,cache:!1,async:!1,dataType:"jsonp",success:function(t){n[s]=t[e]}})},getSongList:function(){this.Server({method:"baidu.ting.billboard.billList",type:this.songType,size:20,offset:0},"song_list","songList")},showFromSongClassify:function(t){this.songType=t,this.getSongList()}},components:{SongClassify:s("VU/8")({props:["songType"],name:"SongClassify",data:function(){return{list:[{type:1,text:"最新歌曲"},{type:2,text:"热门歌曲"},{type:11,text:"摇滚音乐"},{type:12,text:"爵士音乐"},{type:16,text:"流行音乐"},{type:21,text:"欧美金曲"},{type:22,text:"经典老歌"},{type:23,text:"情歌对唱"},{type:24,text:"影视金曲"},{type:25,text:"网络歌曲"}]}},methods:{sendTypeToHome:function(t){this.$emit("listenSongClassify",t)}}},m,!1,null,null,null).exports,SongList:s("VU/8")({props:["songList"],name:"SongList"},p,!1,null,null,null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home-page",attrs:{id:"homePage"}},[e("SongClassify",{attrs:{"song-type":this.songType},on:{listenSongClassify:this.showFromSongClassify}}),this._v(" "),e("SongList",{attrs:{"song-list":this.songList}})],1)},staticRenderFns:[]},v=s("VU/8")(d,h,!1,null,null,null).exports,g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"song-search"},[e("div",{staticClass:"music-none"})])}]},y=s("VU/8")({name:"Search"},g,!1,null,null,null).exports,f={name:"SongPlay",data:function(){return{title:"歌曲播放",lrcContent:"",lrcList:[],autoTimer:null,translatey:0}},beforeRouteEnter:function(t,e,s){s(function(t){t.$route.query&&t.$route.query.songId?t.getLrc():mui.alert("请点击首页中歌曲的列表进行播放！","提示","确定",function(){t.$router.push({path:"/main/home",query:{msg:"来自播放页面的提示"}})})})},methods:{getLrc:function(){var t=this;$.ajax({url:this.HOME,type:"get",data:{method:"baidu.ting.song.lry",songid:this.$route.query.songId},cache:!1,async:!1,dataType:"jsonp",success:function(e){t.title=e.title.replace(/[（）《》]/gi,""),t.lrcContent=e.lrcContent,t.getSongPlaySrc(),t.handlerLrc(),t.playing()}})},handlerLrc:function(){var t=this;this.lrcContent.replace(/[\r\n\s&nbsp;]/gim,"").replace(/\[(\d+):(\d+)\.\d+]([^\[]+)?/gim,function(){for(var e=arguments.length,s=Array(e),n=0;n<e;n++)s[n]=arguments[n];var a=s[1],i=s[2],r=s[3];r&&t.lrcList.push({minutes:a,seconds:i,text:r})})},playing:function(){var t=this;clearInterval(t.autoTimer),this.autoTimer=setInterval(function(){var e=$("#audioBox")[0].duration,s=$("#audioBox")[0].currentTime;t.lyricSpondence(e,s),s>=e&&(clearInterval(t.autoTimer),$("#lrcList").find("li").removeClass("active"),$("#lrcList").css("transform","translateY(0)"))},1e3)},getSongPlaySrc:function(){$.ajax({url:this.HOME,type:"get",data:{method:"baidu.ting.song.play",songid:this.$route.query.songId},cache:!1,async:!1,dataType:"jsonp",success:function(t){$("#audioBox").attr("src",t.bitrate.file_link),document.getElementById("audioBox").oncanplay=function(){document.getElementById("audioBox").play()}}})},lyricSpondence:function(t,e){var s=Math.floor(e/60),n=Math.ceil(e-60*s);s<10&&(s="0"+s),n<10&&(n="0"+n);var a=$("#lrcList").find("li").filter('[data-minutes="'+s+'"]').filter('[data-seconds="'+n+'"]');a.length&&(a.addClass("active").siblings().removeClass("active"),a.index()>=5&&(this.translatey-=.86))}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-play"},[s("div",{staticClass:"header nav"},[s("div",{staticClass:"back"},[s("router-link",{staticClass:"icon icon-back",attrs:{to:"/main/home"}})],1),t._v(" "),s("h1",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),t.lrcList.length?s("div",{staticClass:"lrc-list-wrap"},[s("ul",{staticClass:"mui-table-view",style:{transform:"translateY("+t.translatey+"rem)"},attrs:{id:"lrcList"}},t._l(t.lrcList,function(e){return s("li",{staticClass:"mui-table-view-cell",attrs:{"data-minutes":e.minutes,"data-seconds":e.seconds}},[s("span",[t._v(t._s(e.text))])])}))]):t._e(),t._v(" "),t.lrcList.length?t._e():s("div",{staticClass:"music-none"})])},staticRenderFns:[]},C=s("VU/8")(f,_,!1,null,null,null).exports;n.a.use(o.a);var x=new o.a({routes:[{path:"/",redirect:"/main"},{path:"/",name:"main",component:u,children:[{path:"/main",redirect:"/main/home"},{path:"/main/home",name:"home",component:v,meta:{keepAlive:!0}},{path:"/main/search",name:"search",component:y,meta:{keepAlive:!1}},{path:"/main/play",name:"songPlay",component:C}]}]});n.a.prototype.HOME="https://tingapi.ting.baidu.com/v1/restserver/ting",n.a.config.productionTip=!1,new n.a({el:"#app",router:x,components:{App:l},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.3eb5602699835843c158.js.map