webpackJsonp([0],{"2WZd":function(t,n){},"5BQ8":function(t,n){},"9Hkd":function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("7+uW"),a={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var i=e("VU/8")({name:"App"},a,!1,function(t){e("iOE0")},null,null).exports,o=e("/ocq"),r={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"tabbar"},[n("router-link",{class:{active:"/main/home"===this.$route.path},attrs:{to:"/main/home"}},[this._v("首页")]),this._v(" "),n("router-link",{class:{active:"/main/search"===this.$route.path},attrs:{to:"/main/search"}},[this._v("搜索")])],1)},staticRenderFns:[]};var c={name:"Main",components:{TabBar:e("VU/8")({name:"TabBar"},r,!1,function(t){e("jzkR")},"data-v-1602f3e5",null).exports}},l={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"mainPage"}},[n("TabBar"),this._v(" "),n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view"),this._v(" "),n("audio",{attrs:{id:"audioBox",preload:"auto"}})],1)},staticRenderFns:[]};var d=e("VU/8")(c,l,!1,function(t){e("5BQ8")},null,null).exports,u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"login"}},[this._v("\n  login\n  "+this._s(this.$route.params.name)+"\n")])},staticRenderFns:[]};var g=e("VU/8")({name:"Login"},u,!1,function(t){e("WtBn")},null,null).exports,p={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"category"},t._l(t.songTypeList,function(n,s){return e("a",{key:n.id,class:{active:n.id===Number(t.songType)},attrs:{href:"javascript:void(0);","data-type":n.id},on:{click:function(n){t.songTypeIndex(n)}}},[t._v(t._s(n.text))])}))},staticRenderFns:[]};var h=e("VU/8")({props:["songType"],name:"Category",data:function(){return{songTypeList:[{id:1,text:"新歌榜"},{id:2,text:"热歌榜"},{id:11,text:"摇滚榜"},{id:12,text:"爵士"},{id:16,text:"流行"},{id:21,text:"欧美金曲榜"},{id:22,text:"经典老歌榜"},{id:23,text:"情歌对唱榜"},{id:24,text:"影视金曲榜"},{id:25,text:"网络歌曲榜"}]}},methods:{songTypeIndex:function(t){this.$emit("getChild",t.target.getAttribute("data-type"))}}},p,!1,function(t){e("r8St")},"data-v-35804624",null).exports,f=new s.a,v={props:["songList","playSondId"],name:"SongsCenter",methods:{sendData:function(t,n,e){f.$emit("isSongCanPlay","true"),$(e.target).hasClass("song-played")?($(e.target).removeClass("song-played").addClass("song-paused"),f.$emit("isSongCanPlay","false")):$(e.target).hasClass("song-paused")?($(e.target).removeClass("song-paused").addClass("song-played"),f.$emit("isSongCanPlay","true")):($("#lrcContent").find("li").removeClass("active"),$("#lrcContent").attr("data-y",0).css("transform","translateY(0)"),this.$emit("getSongsCenterData",t,n))}}},m={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"songlist"},[t._l(t.songList,function(n,s){return e("div",{key:n.song_id,staticClass:"songlist-list",class:{active:t.playSondId===n.song_id}},[e("div",[e("span",{class:{"song-playing":t.playSondId===n.song_id}},[t._v(t._s(n.title.replace(/[（）《》]/g,"")))]),t._v(" "),e("span",{staticStyle:{float:"right","padding-right":"10px","padding-left":"0"}},[t._v(t._s(n.author))])]),t._v(" "),e("div",[e("a",{staticClass:"song-play-pause",class:{"song-played":t.playSondId===n.song_id},attrs:{href:"javascript:void(0);","data-songid":n.song_id,"data-tinguid":n.ting_uid},on:{click:function(e){t.sendData(n.song_id,n.ting_uid,e)}}})])])}),t._v(" "),t.songList.length?t._e():e("div",{staticClass:"song-no-played"})],2)},staticRenderFns:[]};var y={props:["singerData","songLrcData","songLink","playSondId"],name:"SongInfo",data:function(){return{lrcData:[],audioBox:null,autoTimer:null}},watch:{songLrcData:function(t,n){this.lrcData=this.analysisLrc(this.songLrcData.lrcContent)},songLink:function(t,n){this.audioBox.src=this.songLink,this.audioBox.play()}},mounted:function(){this.audioBox=document.getElementById("audioBox"),this.lrcContent=document.getElementById("lrcContent");var t=this;f.$on("isSongCanPlay",function(n){"true"===n?(t.audioBox.play(),t.playing()):(clearInterval(t.autoTimer),t.audioBox.pause())})},methods:{analysisLrc:function(t){var n=[];return t.replace(/[\r\n\s&nbsp;]/gim,"").replace(/\[(\d+):(\d+)\.\d+]([^\[]+)?/gim,function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];var a=e[1],i=e[2],o=e[3];o&&n.push({minutes:a,seconds:i,text:o})}),n},playing:function(){var t=this;clearInterval(t.autoTimer),this.autoTimer=setInterval(function(){var n=t.audioBox.duration,e=t.audioBox.currentTime;t.lyricSpondence(n,e),e>=n&&(clearInterval(t.autoTimer),$(t.lrcContent).find("li").removeClass("active"),$(t.lrcContent).attr("data-y",0).css("transform","translateY(0)"),t.$emit("listPlaySongs"))},1e3)},lyricSpondence:function(t,n){var e=Math.floor(n/60),s=Math.ceil(n-60*e);e<10&&(e="0"+e),s<10&&(s="0"+s);var a=$(this.lrcContent).find("li").filter('[data-minutes="'+e+'"]').filter('[data-seconds="'+s+'"]');if(a.length&&(a.addClass("active").siblings().removeClass("active"),a.index()>=9)){var i=($(this.lrcContent).attr("data-y")||0)-30;$(this.lrcContent).attr("data-y",i).css("transform","translateY("+i+"px)")}}}},_={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"song-info"},[e("div",{staticClass:"song-info-siger"},[e("p",[t._v("歌手信息")]),t._v(" "),e("p",{staticClass:"siger-logo"},[t.singerData.avatar_s1000?e("img",{attrs:{src:t.singerData.avatar_s1000,alt:"歌手照片",width:"100"}}):t._e()]),t._v(" "),e("p",[t._v("地区："+t._s("香港"===t.singerData.country||"澳门"===t.singerData.country||"台湾"===t.singerData.country?"中国"+t.singerData.country:t.singerData.country))]),t._v(" "),e("p",[t._v("姓名："+t._s(t.singerData.name))]),t._v(" "),e("p",[t._v("公司："+t._s(t.singerData.company))]),t._v(" "),e("p",[t._v("生日："+t._s(t.singerData.birth))]),t._v(" "),e("p",{staticStyle:{height:"300px",overflow:"hidden"}},[t._v("简介："+t._s(t.singerData.intro))]),t._v(" "),t.singerData.ting_uid?t._e():e("div",{staticClass:"song-no-played"})]),t._v(" "),e("div",{staticClass:"song-info-lrc"},[e("p",[t._v(t._s(t.songLrcData.title?t.songLrcData.title:"歌词信息"))]),t._v(" "),e("div",{staticClass:"lrc-content-wrap"},[e("ul",{staticClass:"lrc-content",attrs:{id:"lrcContent"}},t._l(t.lrcData,function(n){return e("li",{attrs:{"data-minutes":n.minutes,"data-seconds":n.seconds}},[t._v(t._s(n.text))])}))]),t._v(" "),t.lrcData.length?t._e():e("div",{staticClass:"song-no-played"})])])},staticRenderFns:[]};var x={name:"Home",data:function(){return{listIndex:0,playSondId:0,playTingUid:0,songType:1,songSize:19,songOffset:0,songList:[],singerData:{},songLrcData:{},songLink:""}},mounted:function(){this.$route.params&&this.$route.params.songs?this.songList=this.$route.params.songs:this.getSongList()},methods:{songTypeIndex:function(t){this.songType=t,this.getSongList()},sendData:function(t,n){this.listIndex=function(t,n){if(!t)return-1;if(!n.length)return-1;for(var e=0;e<n.length;e++){var s=n[e];if("[object Object]"==={}.toString.call(s)){for(var a in s)if(s.hasOwnProperty(a)&&s[a]===t)return e}else if(s===t)return e}return-1}(t,this.songList),this.playSondId=t,this.playTingUid=n,n&&this.getSingerInfo(),this.getSongLrcInfo(),this.playSong()},getSongList:function(){var t=this;$.ajax({url:this.HOME+"method=baidu.ting.billboard.billList&type="+this.songType+"&size="+this.songSize+"&offset="+this.songOffset,type:"get",cache:!1,dataType:"jsonp",success:function(n){t.songList=n.song_list},error:function(n){t.songList=[],console.dir(n)}})},getSingerInfo:function(){var t=this;$.ajax({url:this.HOME+"method=baidu.ting.artist.getInfo&tinguid="+this.playTingUid,type:"get",cache:!1,dataType:"jsonp",success:function(n){t.singerData=n},error:function(n){t.singerData={},console.log("%c 获取歌手信息失败","color:#ff0000")}})},getSongLrcInfo:function(){var t=this;$.ajax({url:this.HOME+"method=baidu.ting.song.lry&songid="+this.playSondId,type:"get",cache:!1,dataType:"jsonp",success:function(n){t.songLrcData=n},error:function(n){t.songLrcData={},console.log("%c 获取歌曲歌词信息失败","color:#ff0000")}})},playSong:function(){var t=this;$.ajax({url:this.HOME+"method=baidu.ting.song.play&songid="+this.playSondId,type:"get",cache:!1,dataType:"jsonp",success:function(n){t.songLink=n.bitrate.file_link},error:function(n){t.songLink="",console.log("%c 获取歌曲链接失败","color:#ff0000")}})},listPlaySongs:function(){this.listIndex++,this.listIndex>=this.songList.length&&(this.listIndex=0),this.playSondId=this.songList[this.listIndex].song_id,this.playTingUid=this.songList[this.listIndex].ting_uid,this.playTingUid&&this.getSingerInfo(),this.getSongLrcInfo(),this.playSong(),this.$refs.mySongInfo.playing(),console.log("现在播放第"+(this.listIndex+1)+"首歌")}},components:{Category:h,SongsCenter:e("VU/8")(v,m,!1,function(t){e("9Hkd")},"data-v-7288c564",null).exports,SongInfo:e("VU/8")(y,_,!1,function(t){e("lmnf")},"data-v-5f253e6a",null).exports}},C={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"home"}},[e("Category",{attrs:{"song-type":t.songType},on:{getChild:t.songTypeIndex}}),t._v(" "),e("div",{staticClass:"songs-content"},[e("SongsCenter",{attrs:{"song-list":t.songList,"play-sond-id":t.playSondId},on:{getSongsCenterData:t.sendData}}),t._v(" "),e("SongInfo",{ref:"mySongInfo",attrs:{"singer-data":t.singerData,"song-lrc-data":t.songLrcData,"song-link":t.songLink},on:{listPlaySongs:t.listPlaySongs}})],1)],1)},staticRenderFns:[]};var S=e("VU/8")(x,C,!1,function(t){e("2WZd")},"data-v-46ec4d66",null).exports,L={name:"Search",data:function(){return{query:"",isQueryed:!1}},mounted:function(){var t=this;$(document).on("keyup",function(n){13===(n=n||window.event).keyCode&&t.queryHandle()})},beforeRouteEnter:function(t,n,e){t.meta.keepAlive=!0,e()},methods:{queryHandle:function(){var t=this;t.isQueryed=!0,$.ajax({url:this.HOME+"method=baidu.ting.search.catalogSug&query="+this.query,type:"get",cache:!1,dataType:"jsonp",success:function(n){if(22e3===n.error_code){for(var e=[],s=0;s<n.song.length;s++){var a=n.song[s];a.song_id=a.songid,a.title=a.songname,e.push(a)}t.$router.push({name:"home",params:{songs:e}}),t.songList=e}t.query="",t.isQueryed=!1},error:function(t){console.log("%c 搜索歌曲失败","color:#ff0000")}})}},beforeRouteLeave:function(t,n,e){t.meta.keepAlive=!this.isQueryed,e()}},I={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"search"},[t._m(0),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:"请输入搜索关键字"},domProps:{value:t.query},on:{input:function(n){n.target.composing||(t.query=n.target.value)}}}),t._v(" "),e("span",[e("input",{attrs:{type:"button",value:"搜索"},on:{click:function(n){t.queryHandle()}}})])]),t._v(" "),e("div",{staticClass:"search-footer"},[t._v("云中白鹤 @ 2018-12-04 © music")])])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticStyle:{"margin-bottom":"10px","text-align":"center"}},[n("img",{attrs:{src:e("rkJR"),width:"100",alt:""}})])}]};var D=e("VU/8")(L,I,!1,function(t){e("asyY")},"data-v-f4d2809a",null).exports;s.a.use(o.a);var k=new o.a({routes:[{path:"/",redirect:"/main"},{path:"/main",name:"main",component:d,children:[{path:"/main",redirect:"/main/home"},{path:"/main/home",name:"home",component:S,meta:{keepAlive:!0}},{path:"/main/login",name:"login",component:g},{path:"/main/search",name:"search",component:D,meta:{keepAlive:!1}}]}]});s.a.prototype.HOME="//tingapi.ting.baidu.com/v1/restserver/ting?",s.a.config.productionTip=!1,new s.a({el:"#app",router:k,components:{App:i},template:"<App/>"})},WtBn:function(t,n){},asyY:function(t,n){},iOE0:function(t,n){},jzkR:function(t,n){},lmnf:function(t,n){},r8St:function(t,n){},rkJR:function(t,n,e){t.exports=e.p+"static/img/music.icon.c189e17.png"}},["NHnr"]);
//# sourceMappingURL=app.3d47bd9f44a402da1b62.js.map